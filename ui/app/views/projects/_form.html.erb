 <%- unless @project.sources_enabled.empty? %>
    <% s_list = [] %>
    <% @project.sources_enabled.each do |item| %>
        <% s_list << [item[:url],item[:id]] %>
    <% end %>
 <% end %>

<%= form_for @project do |f| %>
  <% if @project.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@project.errors.count, "error") %> prohibited
      this project from being saved:</h2>
    <ul>
    <% @project.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>
  <p>
    <%= f.label :title %><br>
    <%= f.text_field :title %>
  </p>
 
  <p>
    <%= f.label :text %><br>
    <%= f.text_area :text, :size => "100x10" %>
  </p>
 <%- unless @project.sources_enabled.empty? %>
    <p>
        <%= f.label :distribution %>
        <% if ! @project.distribution.nil? %>
            <%= f.select :distribution, options_for_select(s_list,@project.distribution) %>
        <% else %>
            <%= f.select :distribution, options_for_select(s_list) %>
        <% end %>
    </p>
 <% end %>
  <p>
    <%= f.submit %>
  </p>

<% end %>

 <%- unless @project.sources_ordered.empty? %>
 <p>       
    <strong>Sources:</strong>
    <ol>   
    <% @project.sources_ordered.each do |item| %>
      <li>
        <%= link_to item.url , item.url, title: "SCM TYPE:#{item.scm_type};  ID:#{item.id};  SN:#{item.sn}" %>
        [ <%= link_to 'Delete', [ item.project, item], method: :delete, data: { confirm: "You are about to delete source # #{item[:id]} in project #{@project[:id]}. Are you shure ?" }   %>
        <%= link_to 'Up', [ :up, item.project, item   ], method: :post   %>
        <% if item[:state] == 't'  %>
            <%= link_to 'Off', [ :off, item.project, item   ], method: :post, title: "click to disable this source"  %>
        <% else %>
            <%= link_to 'On', [ :on, item.project, item   ], method: :post,  title: "click to enable this source" %>
        <% end %> ]
      </li>
    <% end %>
    </ol>
 </p>
 <% end %>


